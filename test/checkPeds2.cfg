process COMPARE = {

  path p = { prod  }

  include "CondCore/DBCommon/data/CondDBSetup.cfi"

  es_module hcal_db_producer = HcalDbProducer {
         untracked vstring dump = {""}
         untracked string file = ""
  }

  es_source es_ascii = HcalTextCalibrations { 
                       string appendToDataLabel = "reference"
                       VPSet input = {
                        {string object = "Pedestals"
                         FileInPath file = "CondFormats/HcalObjects/data/hcal_pedestals_fC_v3.txt"
                        }
                        ,{string object = "ElectronicsMap"
                         FileInPath file = "CondFormats/HcalObjects/data/official_emap_v5_080208.txt"
                        }
                       }
  }
  es_source es_ascii2 = HcalTextCalibrations { 
                       string appendToDataLabel = "update"
                       VPSet input = {
                        {string object = "Pedestals"
                         FileInPath file = "CondFormats/HcalObjects/data/GREN_peds_v2/gren_peds_v2_with30625.txt"
                        }
                       }
  }
  
  es_prefer es_ascii = HcalTextCalibrations{}

  es_source es_hardcode = HcalHardcodeCalibrations {
                        string appendToDataLabel = "reference"
                        untracked vstring toGet = {"GainWidths", "channelQuality"}
  }
  
  untracked PSet maxEvents = {untracked int32 input = 1 }   
    
  source = EmptySource {
	untracked uint32 firstRun = 1
	untracked uint32 numberEventsInRun = 1
  }
    
  module prod = HcalPedestalsCheck{ 
  	      	      untracked string outFile = 'testmerge.txt' # merge
		      untracked string dumpRefPedsTo = 'dump.txt' #if present
                      untracked string dumpUpdatePedsTo = 'dump2.txt' #if present
                     untracked bool checkEmap = true #default is true
#                     untracked bool validatePedestals = true #if true, will compare the each channel's values
#                     untracked double deltaP = .5 # if present, will check to make sure the pedestals do not vary by more than deltaP
#

  }
    
}
